<html>
<head>
<title>ToCyrillic Google Chrome Extension Setup</title>
<script src="/js/utils.js" type="text/javascript"></script>
<script type="text/javascript">
// Saves options to localStorage.
function save_options() {
  var select = document.getElementById("tocyrillic.button");
  var button = select.children[select.selectedIndex].value;
  var global = document.getElementById("tocyrillic.global").checked;
  // update storage
  localStorage["tocyrillic.button"] = button;
  localStorage["tocyrillic.global"] = global;
  if(!global){
	  localStorage["tocyrillic.global.mode"] = false;
  }
  // propagate properties
  sendRequestToAllTabs(createResponse("setProperties"));
  // Update status to let user know options were saved.
  var status = document.getElementById("status");
  status.innerHTML = "Options saved";
  setTimeout(function() {status.innerHTML = "";}, 1000);
}

// Restores select box state to saved value from localStorage.
function restore_options() {
  var button = localStorage["tocyrillic.button"];
  if(button){
    var select = document.getElementById("tocyrillic.button");
    for (var i = 0; i < select.children.length; i++) {
      var child = select.children[i];
      if (child.value == button) {
        child.selected = true;
        break;
      }
    }
  }
  var global = localStorage["tocyrillic.global"];
  if(global){
	var globalCheckbox = document.getElementById("tocyrillic.global");
	globalCheckbox.checked = true;
  }
}
</script>
<style>
body{
margin: 1em auto;
width: 600;
}
table.widgets{
margin: 1em auto;
}
</style>
</head>

<body onload="restore_options()">

<center>
<img src="/images/icon128.png"/>
</center>

<h1>ToCyrillic Google Chrome Extension Setup</h1>

<table class="widgets" cellpadding="10">
<tr>
<td>Cyrillic mode toggle key:</td>
<td>
<select id="tocyrillic.button">
 <option value="F2">F2</option>
 <option value="F3">F3</option>
 <option value="F4">F4</option>
 <option value="F7">F7</option>
 <option value="F8">F8</option>
 <option value="F9">F9</option>
 <option value="F10">F10</option>
</select>
</td>
</tr>
<tr>
<td>Toggle cyrillic mode globally</td>
<td>
<input type="checkbox" id="tocyrillic.global" />
</td> 
</tr>
<tr><td colspan="2">
<button onclick="save_options()">Save</button>
&nbsp;&nbsp;
<span id="status" style="color:gray"></span>
</td></tr>
</table>


</body>
</html>

